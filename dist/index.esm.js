import{router as lr}from"@inertiajs/core";import{createHeadManager as q,router as C}from"@inertiajs/core";import{computed as v,defineComponent as B,h as S,markRaw as I,reactive as U,ref as k,shallowRef as J}from"vue";import{router as _}from"@inertiajs/core";import L from"lodash.clonedeep";var R={created(){if(!this.$options.remember)return;Array.isArray(this.$options.remember)&&(this.$options.remember={data:this.$options.remember}),typeof this.$options.remember=="string"&&(this.$options.remember={data:[this.$options.remember]}),typeof this.$options.remember.data=="string"&&(this.$options.remember={data:[this.$options.remember.data]});let e=this.$options.remember.key instanceof Function?this.$options.remember.key.call(this):this.$options.remember.key,n=_.restore(e),t=this.$options.remember.data.filter(o=>!(this[o]!==null&&typeof this[o]=="object"&&this[o].__rememberable===!1)),s=o=>this[o]!==null&&typeof this[o]=="object"&&typeof this[o].__remember=="function"&&typeof this[o].__restore=="function";t.forEach(o=>{this[o]!==void 0&&n!==void 0&&n[o]!==void 0&&(s(o)?this[o].__restore(n[o]):this[o]=n[o]),this.$watch(o,()=>{_.remember(t.reduce((l,p)=>({...l,[p]:L(s(p)?this[p].__remember():this[p])}),{}),e)},{immediate:!0,deep:!0})})}},D=R;import{router as P}from"@inertiajs/core";import g from"lodash.clonedeep";import H from"lodash.isequal";import{reactive as V,watch as M}from"vue";function T(e,n){let t=typeof e=="string"?e:null,s=typeof e=="string"?n:e,o=t?P.restore(t):null,l=typeof s=="object"?g(s):g(s()),p=null,f=null,h=r=>r,y=V({...o?o.data:g(l),isDirty:!1,errors:o?o.errors:{},hasErrors:!1,processing:!1,progress:null,wasSuccessful:!1,recentlySuccessful:!1,data(){return Object.keys(l).reduce((r,i)=>(r[i]=this[i],r),{})},transform(r){return h=r,this},defaults(r,i){if(typeof s=="function")throw new Error("You cannot call `defaults()` when using a function to define your form data.");return typeof r>"u"?l=this.data():l=Object.assign({},g(l),typeof r=="string"?{[r]:i}:r),this},reset(...r){let i=typeof s=="object"?g(l):g(s()),a=g(i);return r.length===0?(l=a,Object.assign(this,i)):Object.keys(i).filter(m=>r.includes(m)).forEach(m=>{l[m]=a[m],this[m]=i[m]}),this},setError(r,i){return Object.assign(this.errors,typeof r=="string"?{[r]:i}:r),this.hasErrors=Object.keys(this.errors).length>0,this},clearErrors(...r){return this.errors=Object.keys(this.errors).reduce((i,a)=>({...i,...r.length>0&&!r.includes(a)?{[a]:this.errors[a]}:{}}),{}),this.hasErrors=Object.keys(this.errors).length>0,this},submit(r,i,a={}){let m=h(this.data()),b={...a,onCancelToken:u=>{if(p=u,a.onCancelToken)return a.onCancelToken(u)},onBefore:u=>{if(this.wasSuccessful=!1,this.recentlySuccessful=!1,clearTimeout(f),a.onBefore)return a.onBefore(u)},onStart:u=>{if(this.processing=!0,a.onStart)return a.onStart(u)},onProgress:u=>{if(this.progress=u,a.onProgress)return a.onProgress(u)},onSuccess:async u=>{this.processing=!1,this.progress=null,this.clearErrors(),this.wasSuccessful=!0,this.recentlySuccessful=!0,f=setTimeout(()=>this.recentlySuccessful=!1,2e3);let N=a.onSuccess?await a.onSuccess(u):null;return l=g(this.data()),this.isDirty=!1,N},onError:u=>{if(this.processing=!1,this.progress=null,this.clearErrors().setError(u),a.onError)return a.onError(u)},onCancel:()=>{if(this.processing=!1,this.progress=null,a.onCancel)return a.onCancel()},onFinish:u=>{if(this.processing=!1,this.progress=null,p=null,a.onFinish)return a.onFinish(u)}};r==="delete"?P.delete(i,{...b,data:m}):P[r](i,m,b)},get(r,i){this.submit("get",r,i)},post(r,i){this.submit("post",r,i)},put(r,i){this.submit("put",r,i)},patch(r,i){this.submit("patch",r,i)},delete(r,i){this.submit("delete",r,i)},cancel(){p&&p.cancel()},__rememberable:t===null,__remember(){return{data:this.data(),errors:this.errors}},__restore(r){Object.assign(this,r.data),this.setError(r.errors)}});return M(y,r=>{y.isDirty=!H(y.data(),l),t&&P.remember(g(r.__remember()),t)},{immediate:!0,deep:!0}),y}var c=k(null),d=k(null),x=J(null),F=k(null),A=null,W=B({name:"Inertia",props:{initialPage:{type:Object,required:!0},initialComponent:{type:Object,required:!1},resolveComponent:{type:Function,required:!1},titleCallback:{type:Function,required:!1,default:e=>e},onHeadUpdate:{type:Function,required:!1,default:()=>()=>{}}},setup({initialPage:e,initialComponent:n,resolveComponent:t,titleCallback:s,onHeadUpdate:o}){c.value=n?I(n):null,d.value=e,F.value=null;let l=typeof window>"u";return A=q(l,s,o),l||(C.init({initialPage:e,resolveComponent:t,swapComponent:async p=>{c.value=I(p.component),d.value=p.page,F.value=p.preserveState?F.value:Date.now()}}),C.on("navigate",()=>A.forceUpdate())),()=>{if(c.value){c.value.inheritAttrs=!!c.value.inheritAttrs;let p=S(c.value,{...d.value.props,key:F.value});return x.value&&(c.value.layout=x.value,x.value=null),c.value.layout?typeof c.value.layout=="function"?c.value.layout(S,p):(Array.isArray(c.value.layout)?c.value.layout:[c.value.layout]).concat(p).reverse().reduce((f,h)=>(h.inheritAttrs=!!h.inheritAttrs,S(h,{...d.value.props},()=>f))):p}}}}),E=W,$={install(e){C.form=T,Object.defineProperty(e.config.globalProperties,"$inertia",{get:()=>C}),Object.defineProperty(e.config.globalProperties,"$page",{get:()=>d.value}),Object.defineProperty(e.config.globalProperties,"$headManager",{get:()=>A}),e.mixin(D)}};function Q(){return U({props:v(()=>d.value?.props),url:v(()=>d.value?.url),component:v(()=>d.value?.component),version:v(()=>d.value?.version),scrollRegions:v(()=>d.value?.scrollRegions),rememberedState:v(()=>d.value?.rememberedState)})}import{setupProgress as Y}from"@inertiajs/core";import{createSSRApp as z,h as G}from"vue";async function j({id:e="app",resolve:n,setup:t,title:s,progress:o={},page:l,render:p}){let f=typeof window>"u",h=f?null:document.getElementById(e),y=l||JSON.parse(h.dataset.page),r=m=>Promise.resolve(n(m)).then(b=>b.default||b),i=[],a=await r(y.component).then(m=>t({el:h,App:E,props:{initialPage:y,initialComponent:m,resolveComponent:r,titleCallback:s,onHeadUpdate:f?b=>i=b:null},plugin:$}));if(!f&&o&&Y(o),f){let m=await p(z({render:()=>G("div",{id:e,"data-page":JSON.stringify(y),innerHTML:a?p(a):""})}));return{head:i,body:m}}}import{defineComponent as K}from"vue";var X=K({props:{title:{type:String,required:!1}},data(){return{provider:this.$headManager.createProvider()}},beforeUnmount(){this.provider.disconnect()},methods:{isUnaryTag(e){return["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(e.type)>-1},renderTagStart(e){e.props=e.props||{},e.props.inertia=e.props["head-key"]!==void 0?e.props["head-key"]:"";let n=Object.keys(e.props).reduce((t,s)=>{let o=e.props[s];return["key","head-key"].includes(s)?t:o===""?t+` ${s}`:t+` ${s}="${o}"`},"");return`<${e.type}${n}>`},renderTagChildren(e){return typeof e.children=="string"?e.children:e.children.reduce((n,t)=>n+this.renderTag(t),"")},isFunctionNode(e){return typeof e.type=="function"},isComponentNode(e){return typeof e.type=="object"},isCommentNode(e){return/(comment|cmt)/i.test(e.type.toString())},isFragmentNode(e){return/(fragment|fgt|symbol\(\))/i.test(e.type.toString())},isTextNode(e){return/(text|txt)/i.test(e.type.toString())},renderTag(e){if(this.isTextNode(e))return e.children;if(this.isFragmentNode(e))return"";if(this.isCommentNode(e))return"";let n=this.renderTagStart(e);return e.children&&(n+=this.renderTagChildren(e)),this.isUnaryTag(e)||(n+=`</${e.type}>`),n},addTitleElement(e){return this.title&&!e.find(n=>n.startsWith("<title"))&&e.push(`<title inertia>${this.title}</title>`),e},renderNodes(e){let n=[];for(let t of e){let s=this.resolveNode(t);Array.isArray(s)?n.push(...s):n.push(s)}return this.addTitleElement(n.map(t=>this.renderTag(t)).filter(t=>t))},resolveNode(e){if(this.isFunctionNode(e))return this.resolveNode(e.type());if(this.isComponentNode(e))return console.warn("Using components in the <Head> component is not supported."),[];if(this.isTextNode(e)&&e.children)return e;if(this.isFragmentNode(e)&&e.children){let n=[];for(let t of e.children){let s=this.resolveNode(t);Array.isArray(s)?n.push(...s):n.push(s)}return n}else return this.isCommentNode(e)?[]:e}},render(){this.provider.update(this.renderNodes(this.$slots.default?this.$slots.default():[]))}}),Z=X;import{mergeDataIntoQueryString as ee,router as re,shouldIntercept as te}from"@inertiajs/core";import{defineComponent as oe,h as ne}from"vue";var se=oe({name:"Link",props:{as:{type:String,default:"a"},data:{type:Object,default:()=>({})},href:{type:String,required:!0},method:{type:String,default:"get"},replace:{type:Boolean,default:!1},preserveScroll:{type:Boolean,default:!1},preserveState:{type:Boolean,default:null},only:{type:Array,default:()=>[]},except:{type:Array,default:()=>[]},headers:{type:Object,default:()=>({})},queryStringArrayFormat:{type:String,default:"brackets"}},setup(e,{slots:n,attrs:t}){return()=>{let s=e.as.toLowerCase(),o=e.method.toLowerCase(),[l,p]=ee(o,e.href||"",e.data,e.queryStringArrayFormat);return s==="a"&&o!=="get"&&console.warn(`Creating POST/PUT/PATCH/DELETE <a> links is discouraged as it causes "Open Link in New Tab/Window" accessibility issues.

Please specify a more appropriate element using the "as" attribute. For example:

<Link href="${l}" method="${o}" as="button">...</Link>`),ne(e.as,{...t,...s==="a"?{href:l}:{},onClick:f=>{te(f)&&(f.preventDefault(),re.visit(l,{data:p,method:o,replace:e.replace,preserveScroll:e.preserveScroll,preserveState:e.preserveState??o!=="get",only:e.only,except:e.except,headers:e.headers,onCancelToken:t.onCancelToken||(()=>({})),onBefore:t.onBefore||(()=>({})),onStart:t.onStart||(()=>({})),onProgress:t.onProgress||(()=>({})),onFinish:t.onFinish||(()=>({})),onCancel:t.onCancel||(()=>({})),onSuccess:t.onSuccess||(()=>({})),onError:t.onError||(()=>({}))}))}},n)}}}),ie=se;import{router as w}from"@inertiajs/core";import ae from"lodash.clonedeep";import{isReactive as le,reactive as pe,ref as ue,watch as me}from"vue";function O(e,n){if(typeof e=="object"&&e!==null&&e.__rememberable===!1)return e;let t=w.restore(n),s=le(e)?pe:ue,o=typeof e.__remember=="function"&&typeof e.__restore=="function",l=s(t===void 0?e:o?e.__restore(t):t);return me(l,p=>{w.remember(ae(o?e.__remember():p),n)},{immediate:!0,deep:!0}),l}export{Z as Head,ie as Link,j as createInertiaApp,lr as router,T as useForm,Q as usePage,O as useRemember};
//# sourceMappingURL=index.esm.js.map
